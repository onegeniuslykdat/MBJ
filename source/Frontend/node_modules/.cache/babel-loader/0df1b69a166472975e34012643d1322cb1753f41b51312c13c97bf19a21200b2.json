{"ast":null,"code":"import{useParams}from\"react-router-dom\";import{ProductServices}from'../Services/ProductServices';import{CartServices}from\"../Services/CartServices\";import{useContext,useState}from\"react\";import{CartContext}from\"../Context/CartContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const ProductDetails=()=>{let{id}=useParams();const cartContext=useContext(CartContext);const[quantity,setQuantity]=useState(1);const product=ProductServices.GetProductById(Number.parseInt(id));if(product===undefined){return/*#__PURE__*/_jsx(\"h5\",{className:\"text-center\",children:\"Product not found\"});}const handleAddToCart=()=>{var _cart$products,_cart$products2,_cartContext$cart;let cart=cartContext===null||cartContext===void 0?void 0:cartContext.cart;console.log('Curr Cart',cart);let currProductCount=((_cart$products=cart.products)===null||_cart$products===void 0?void 0:_cart$products.length)!==0?(_cart$products2=cart.products)===null||_cart$products2===void 0?void 0:_cart$products2.length:0;let cartProduct={id:currProductCount+1,cartId:cartContext===null||cartContext===void 0?void 0:(_cartContext$cart=cartContext.cart)===null||_cartContext$cart===void 0?void 0:_cartContext$cart.id,quantity,product};let updatedCart=CartServices.AddCartProduct(cart,cartProduct);console.log('New Cart',updatedCart);cartContext===null||cartContext===void 0?void 0:cartContext.setCart(updatedCart);alert('Added to cart!');};return product&&/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.imageUrl,className:\"img-thumbnail\",alt:product.name}),/*#__PURE__*/_jsx(\"h5\",{className:\"text-center mt-2\",children:product.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mt-3\",children:product.description}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Unit Price: $\",product.price]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",min:1,type:\"number\",id:\"quantity\",title:\"quantity\",placeholder:\"Quantity\",value:quantity,onInput:e=>setQuantity(parseInt(e.currentTarget.value))})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-2 w-75\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning w-100\",onClick:()=>handleAddToCart(),children:\"Add to Cart\"})})]})]})]});};","map":{"version":3,"names":["useParams","ProductServices","CartServices","useContext","useState","CartContext","jsx","_jsx","jsxs","_jsxs","ProductDetails","id","cartContext","quantity","setQuantity","product","GetProductById","Number","parseInt","undefined","className","children","handleAddToCart","_cart$products","_cart$products2","_cartContext$cart","cart","console","log","currProductCount","products","length","cartProduct","cartId","updatedCart","AddCartProduct","setCart","alert","src","imageUrl","alt","name","description","price","min","type","title","placeholder","value","onInput","e","currentTarget","onClick"],"sources":["C:/Users/AVeryPrivatePerson/source/repos/MaryNG/MBJ_demo/source/Frontend/src/Pages/ProductDetails.tsx"],"sourcesContent":["import { useParams } from \"react-router-dom\";\r\nimport Product from \"../Models/Product\"\r\nimport { ProductServices } from '../Services/ProductServices'\r\nimport { CartServices } from \"../Services/CartServices\";\r\nimport Cart from \"../Models/Cart\";\r\nimport CartProduct from \"../Models/CartProduct\";\r\nimport { useContext, useState } from \"react\";\r\nimport { CartContext } from \"../Context/CartContext\";\r\n\r\nexport const ProductDetails = () => {\r\n  let { id } = useParams();\r\n  const cartContext = useContext(CartContext);\r\n  const [quantity, setQuantity] = useState(1);\r\n\r\n  const product: Product | undefined = ProductServices.GetProductById(Number.parseInt(id as string))\r\n\r\n  if (product === undefined) {\r\n    return <h5 className='text-center'>Product not found</h5>\r\n  }\r\n\r\n  const handleAddToCart = () => {\r\n    let cart = cartContext?.cart as Cart;\r\n    console.log('Curr Cart', cart);\r\n\r\n    let currProductCount = cart.products?.length !== 0 ? cart.products?.length : 0;\r\n    let cartProduct: CartProduct = {\r\n      id: currProductCount + 1,\r\n      cartId: cartContext?.cart?.id as number,\r\n      quantity,\r\n      product\r\n    };\r\n    let updatedCart = CartServices.AddCartProduct(cart, cartProduct);\r\n    console.log('New Cart', updatedCart);\r\n    \r\n    cartContext?.setCart(updatedCart);\r\n    alert('Added to cart!');\r\n  }\r\n\r\n  return (product && <div className='row mt-2'>\r\n    <div className='col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12'>\r\n      <img src={product.imageUrl} className='img-thumbnail' alt={product.name} />\r\n      <h5 className='text-center mt-2'>{product.name}</h5>\r\n    </div>\r\n    <div className='col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12'>\r\n      <p className='mt-3'>{product.description}</p>\r\n      <hr />\r\n      <p>Unit Price: ${product.price}</p>\r\n      <hr />\r\n      <div className='d-flex'>\r\n        <div className='p-2'>\r\n          <input className='form-control' min={1} type=\"number\" id=\"quantity\" title='quantity' placeholder=\"Quantity\" value={quantity} onInput={(e) => setQuantity(parseInt(e.currentTarget.value))} />\r\n        </div>\r\n        <div className='p-2 w-75'>\r\n          <button className='btn btn-warning w-100' onClick={() => handleAddToCart()}>Add to Cart</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}