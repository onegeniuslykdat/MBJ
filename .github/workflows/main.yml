---
name: Deploy App to GitHub Pages
on:
 push:
  branches:
   - main

jobs:
 deploy:
  runs-on: ubuntu-latest
  
  steps:
   - name: Checkout Repository
     uses: actions/checkout@v3
   
   - name: Setup Node.js
     uses: actions/setup-node@v4
     with:
      node-version: '18'
  
   - name: Install Dependencies
     working-directory: source/Frontend
     run: npm install

   - name: Fix build script permissions
     working-directory: source/Frontend
     run: chmod +x node_modules/.bin/react-scripts
   
   - name: Build App
     working-directory: source/Frontend
     run: npm run build
   
   - name: Deploy to GitHub Pages
     uses: JamesIves/github-pages-deploy-action@v4
     with:
      branch: gh-pages
      folder: source/Frontend/build
